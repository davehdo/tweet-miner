<p id="notice"><%= notice %></p>

<p>
  <strong>Keyword:</strong>
  <%= @tweet.keyword %>
</p>




<%
  
  omit_keys = ["created_at", "id", "text", "truncated", "possibly_sensitive", "profile_image_url", "profile_image_url_https", "profile_banner_url", "profile_sidebar_fill_color", "profile_background_image_url_https", "profile_background_tile", "profile_background_image_url", "profile_link_color", "profile_sidebar_border_color", "profile_text_color", "profile_use_background_image", "has_extended_profile", "in_reply_to_status_id_str", "in_reply_to_user_id_str", "contributors", "geo", "entities", "is_quote_status"]
  
%>
<table class="table">
  <tr>
    <th style="min-width: 200px; ">Created at</th>
    <th>Text</th>
    <th style="min-width: 200px; ">Statistics</th>
    <th></th>
  </tr>
  <% JSON.parse(@tweet.full_json).each do |tweet| %>
  <tr>
    <td><%= tweet["created_at"] %></td>
    <td><%= tweet["text"] %></td>
    <td>
      <div>Favs: <%= tweet["favorite_count"] %></div>
      <div>RT: <%= tweet["retweet_count"] %></div>
      
      <div>User: <%= tweet["user"]["name"] %></div>
      <div>User followers: <%= tweet["user"]["followers_count"] %></div>
      <div>User statuses: <%= tweet["user"]["statuses_count"] %></div>
      <div>Language: <%= tweet["lang"] %></div>
      
    </td>
    <td>
      <% if params[:expanded] == "t" %>
      <table class="table">

      <% tweet.select {|k,v| !omit_keys.include?(k)}.each do |k,v| %>
        <tr>
          <td><%= k %></td>
          <td><%= v.class == Hash ? v.select {|k,v| !omit_keys.include?(k)} : v %></td>
        </tr>
      <% end %>
      </table>
      <% end %>
    </td>
  </tr>
  <% end %>
</table>

<%# link_to 'Edit', edit_tweet_path(@tweet) %> |
<%# link_to 'Back', tweets_path %>
